from flask import Flask, request
import telegram
import os

app = Flask(__name__)

TELEGRAM_TOKEN = os.environ.get("TELEGRAM_TOKEN")
CHAT_ID = os.environ.get("TELEGRAM_CHAT_ID")

bot = telegram.Bot(token=TELEGRAM_TOKEN)

@app.route('/receive_signal', methods=['POST'])
def receive_signal():
    data = request.json
    signal_text = data.get("message", "ğŸš« Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ù„Ø© Ù…Ø³ØªÙ„Ù…Ø©.")

    if "buy" in signal_text.lower():
        reply = f"ğŸ“ˆ ØªÙˆØµÙŠØ© Ø´Ø±Ø§Ø¡:\n{signal_text}"
    elif "sell" in signal_text.lower():
        reply = f"ğŸ“‰ ØªÙˆØµÙŠØ© Ø¨ÙŠØ¹:\n{signal_text}"
    else:
        reply = f"ğŸ” Ø¥Ø´Ø§Ø±Ø© ØªØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©:\n{signal_text}"

    bot.send_message(chat_id=CHAT_ID, text=reply)
    return 'OK'